<!DOCTYPE html>
<html lang="th" class="owner-page">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>แดชบอร์ดเจ้าของร้าน • FoodFindGo</title>

  <link rel="stylesheet" href="/assets/css/owner.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body class="owner-page">
  <!-- Topbar -->
  <header class="owner-topbar">
    <div class="topbar-inner">
      <div class="brand">FoodfindGo</div>
      <div class="topbar-right">
        <span id="ownerDisplayName" class="owner-name">ชื่อเจ้าของร้าน</span>
        <button id="sidebarToggle" class="icon-btn" aria-label="toggle menu">
          <i class="fa fa-bars"></i>
        </button>
      </div>
    </div>
  </header>

  <div class="owner-shell">
    <!-- Sidebar -->
    <aside class="owner-sidebar" id="ownerSidebar">
      <nav class="side-nav">
        <a href="#" class="side-link active" data-tab="owner">จัดการข้อมูล owner</a>
        <a href="#" class="side-link" data-tab="restaurant">จัดการข้อมูลร้าน</a>
        <a href="#" class="side-link" data-tab="menus">ตารางข้อมูล</a>
        <a href="#" class="side-link side-logout" data-tab="logout">ออกจากระบบ</a>
      </nav>
    </aside>

    <!-- Content -->
    <main class="owner-content">
      <div class="container owner-wrap">

        <!-- TAB: owner info -->
        <section class="card tab-panel" id="tab-owner">
          <div class="card-head"><h2>ข้อมูลเจ้าของร้าน</h2></div>
          <div class="grid-2">
            <div>
              <label>ชื่อที่แสดง</label>
              <input id="displayName" placeholder="ชื่อที่แสดง" disabled/>
            </div>
            <div>
              <label>อีเมล</label>
              <input id="email" placeholder="อีเมล" disabled/>
            </div>
          </div>
        </section>

        <!-- TAB: ร้านของฉัน -->
        <section class="card tab-panel hidden" id="tab-restaurant">
          <div class="card-head">
            <h2>ข้อมูลร้านของฉัน</h2>
            <!-- ✅ เพิ่มตัวเลือกสลับร้าน -->
            <div class="actions">
              <label>เลือกร้าน:
                <select id="restaurantSelect"></select>
              </label>
            </div>
          </div>

          <div id="noRestaurant" class="muted" hidden>
            <p>คุณยังไม่ได้สร้างร้านของตัวเอง</p>
            <button id="btnStartCreate" class="btn btn-primary">
              <i class="fa fa-plus"></i> เริ่มสร้างร้าน
            </button>
          </div>

          <!-- form สร้าง/แก้ไขร้าน -->
          <form id="restaurantForm" class="grid-2" hidden>
            <input type="hidden" id="restaurantId"/>

            <div>
              <label>ชื่อร้าน</label>
              <input id="rName" required placeholder="เช่น ก๋วยเตี๋ยวคุณอร"/>
            </div>
            <div>
              <label>เบอร์โทร</label>
              <input id="rPhone" placeholder="081-xxx-xxxx"/>
            </div>

            <div class="col-span-2">
              <label>ที่อยู่</label>
              <input id="rAddress" placeholder="ที่อยู่ย่อ"/>
            </div>

            <div>
              <label>ละติจูด (lat)</label>
              <input id="rLat" type="number" step="any" placeholder="15.242345">
            </div>
            <div>
              <label>ลองจิจูด (lng)</label>
              <input id="rLng" type="number" step="any" placeholder="104.856789">
            </div>

            <div>
              <label>Facebook</label>
              <input id="rFacebook" placeholder="ลิงก์เพจ"/>
            </div>

            <div class="col-span-2">
              <label>รูปภาพหน้าร้าน (URL)</label>
              <input id="rImage" placeholder="https://..."/>
            </div>

            <div class="col-span-2">
              <label>เวลาเปิด-ปิด (ข้อความย่อ)</label>
              <input id="rHours" placeholder="จ.-ส. 09:00–20:00, อา. หยุด"/>
            </div>

            <div class="col-span-2 right">
              <button class="btn" id="btnCancelRest" type="button">ยกเลิก</button>
              <button class="btn btn-primary" id="btnSaveRest" type="submit">บันทึก</button>
            </div>
          </form>

          <!-- มุมมองสรุปร้าน -->
          <div id="restaurantView" class="restaurant-view" hidden>
            <img id="rPhoto" alt="ร้าน"/>
            <div>
              <h3 id="rTitle"></h3>
              <p id="rMeta" class="muted"></p>
              <p id="rContact" class="muted"></p>
              <div class="right">
                <button id="btnEditRestaurant" class="btn"><i class="fa fa-pen"></i> แก้ไขร้าน</button>
              </div>
            </div>
          </div>
        </section>

        <!-- TAB: เมนู -->
        <section class="card tab-panel hidden" id="tab-menus">
          <div class="card-head">
            <h2>ตารางข้อมูลเมนู</h2>
            <div class="actions">
              <button class="btn btn-primary" id="btnNewMenu"><i class="fa fa-plus"></i> เพิ่มเมนู</button>
            </div>
          </div>

          <!-- ฟอร์มเมนู -->
          <form id="menuForm" class="grid-3" hidden>
            <input type="hidden" id="mId"/>
            <div>
              <label>ชื่อเมนู</label>
              <input id="mName" required/>
            </div>
            <div>
              <label>ราคา</label>
              <input id="mPrice" placeholder="เช่น 60-80 / 79"/>
            </div>
            <div>
              <label>หมวดหมู่</label>
              <input id="mCategory" placeholder="ก๋วยเตี๋ยว/ยำ/ของทอด..."/>
            </div>
            <div class="col-span-3">
              <label>รายละเอียด</label>
              <textarea id="mDesc" rows="2" placeholder="บรรยายสั้น ๆ"></textarea>
            </div>
            <div class="col-span-3">
              <label>รูปภาพเมนู (URL)</label>
              <input id="mImage" placeholder="https://..."/>
            </div>
            <div class="col-span-3 right">
              <label class="checkbox">
                <input type="checkbox" id="mFeatured"/>
                <span>ตั้งเป็นเมนูแนะนำ</span>
              </label>
              <div class="spacer"></div>
              <button class="btn" type="button" id="btnCancelMenu">ยกเลิก</button>
              <button class="btn btn-primary" type="submit" id="btnSaveMenu">บันทึกเมนู</button>
            </div>
          </form>

          <!-- ตารางเมนู -->
          <div class="table-wrap">
            <table class="table" id="menuTable">
              <thead>
                <tr>
                  <th>รูป</th>
                  <th>ชื่อเมนู</th>
                  <th>ราคา</th>
                  <th>หมวด</th>
                  <!-- ✅ เพิ่มคอลัมน์รายละเอียดให้ตรงกับ owner.js -->
                  <th>รายละเอียด</th>
                  <th>แนะนำ</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="menuRows"></tbody>
            </table>
          </div>
        </section>

      </div>
    </main>
  </div>

  <!-- scripts -->
  <script type="module" src="/script.js"></script>
  <script type="module" src="/services/firebase.js"></script>
  <script type="module" src="/services/owner_guard.js"></script>
  <script type="module" src="/owner/owner.js"></script>
</body>
</html>
